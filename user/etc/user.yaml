Name: user.rpc
ListenOn: 0.0.0.0:7778
Consul: 
  Host: ${CONSUL_HOST}
  Key: user.rpc
  Meta:
    Protocol: grpc
  Tag:
    - rpc

UserDatabase:
  Driver: postgres
  MasterDSN: "${PG_MASTER_URL}"
  ReplicaDSN: "${PG_REPLICA_URL}"

UserRedis:
  Host: "${REDIS_HOST}"
  Pass: "${REDIS_PASSWORD}"
  Type: "node"
  Key: "user:"
  Tls: false
  NonBlock: true 

UserReadStrategy: 
  FromReplica: true
  FallbackToMasterOnReadError: true

Kafka:
  Env: dev
  Brokers:
    - localhost:9092

KqUserEvents:
  Name: user-events-consumer
  Brokers:
    - localhost:9092
  Group: user.events.user-rpc
  Topic: dev.user.service.user-events
  Offset: last
  Consumers: 1
  Processors: 1

KafkaUserProducer:
  Acks: all
  Idempotent: true
  RetryMax: 5
  Compression: lz4
  FlushBytes: 1048576
  FlushMessages: 0
  FlushFrequencyMs: 25
  MaxMessageBytes: 1048576
  SASL:
    Enable: false
    Mechanism: plain
    Username: "${KAFKA_SASL_USERNAME}"
    Password: "${KAFKA_SASL_PASSWORD}"
  TLS:
    Enable: false


  